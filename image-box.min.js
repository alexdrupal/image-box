!function(a){function d(){b=-1,c.onClose&&c.onClose()}function e(){return a(f).fadeOut(c.duration,d),!1}var b=-1,c={duration:300,preserveHeight:!0,prevText:"&lang;",nextText:"&rang;",closeText:"&times;",bulletText:"&bullet;",imageLoading:"data:image/svg+xml;base64,"+btoa('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="60px" height="68px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve"><rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" /></rect><rect x="8" y="10" width="4" height="10" fill="#333"  opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" /></rect><rect x="16" y="10" width="4" height="10" fill="#333"  opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" /></rect></svg>'),classOverlay:"iboxOverlay",classWrapper:"iboxWrapper",classButtons:"iboxButtons",classBullets:"iboxBullets",classBullet:"iboxBullet",classActiveBullet:"iboxActive",classTitle:"iboxTitle"},f=document.createElement("div"),g=f.appendChild(document.createElement("div")),h=g.appendChild(document.createElement("img")),i=g.appendChild(document.createElement("div")),j=g.appendChild(document.createElement("div")),k=g.appendChild(document.createElement("a")),l=g.appendChild(document.createElement("a")),m=g.appendChild(document.createElement("a"));a(f).click(e),a(k).attr("id","close").attr("href","#").click(e),a(l).attr("id","prev").attr("href","#"),a(m).attr("id","next").attr("href","#"),a(function(){document.body.appendChild(f)}),a(document).keyup(function(c){return b<0?null:(27==c.keyCode&&e(),37==c.keyCode&&a(l).click(),void(39==c.keyCode&&a(m).click()))}),a.imageBoxOpen=function(b){c.onLoad&&c.onLoad(),a(h).attr("src",b||c.imageLoading),a(k).hide(),a(l).hide(),a(m).hide(),a(i).hide().empty(),a(j).hide().text(""),a(f).unbind("click").fadeIn(c.duration)},a.imageBoxClose=function(){a(f).fadeOut(c.duration,function(){a(k).show(),a(l).show(),a(m).show(),a(i).show(),a(j).show(),a(this).unbind("click").click(e),d()})},a.fn.imagebox=function(d){function n(a,b,c){return Math.min(Math.max(a,b),c)}function o(a){return n(a,0,e.length-1)}function p(){if(c.preserveHeight){var b=a(h).height()+"px";a(l).css({"line-height":b,height:b}),a(m).css({"line-height":b,height:b})}a(l).show(),a(m).show(),c.afterChange&&c.afterChange()}function q(c){return b=o(c),a(e[c]).attr("href")}function r(d){return a(l).hide(),a(m).hide(),c.beforeChange&&c.beforeChange(),a(j).html(a(e[d]).attr("title")),a(h).fadeOut(c.duration,function(){a(this).attr("src",q(d)).fadeIn(c.duration,p);var e=a("a",i).removeClass(c.classActiveBullet);a(e[b]).addClass(c.classActiveBullet)}),!1}var e=this;return d&&a.extend(c,d),a(k).addClass(c.classButtons).html(c.closeText),a(l).addClass(c.classButtons).html(c.prevText),a(m).addClass(c.classButtons).html(c.nextText),this.click(function(){return a(i).empty(),a(f).fadeIn(c.duration),a(l).unbind("click").click(function(){return r(b-1)}),a(m).unbind("click").click(function(){return r(b+1)}),e.each(function(b){var d=i.appendChild(document.createElement("a"));a(d).attr("id","bullet"+b).attr("href","#").addClass(c.classBullet).click(function(){return r(b)}).html(c.bulletText)}),r(e.index(this))}),a(f).attr("id","iboxOverlay").addClass(c.classOverlay),a(g).attr("id","iboxWrapper").addClass(c.classWrapper),a(i).attr("id","iboxBullets").addClass(c.classBullets),a(j).attr("id","iboxTitle").addClass(c.classTitle),c.onLoad&&c.onLoad(),this}}(jQuery);