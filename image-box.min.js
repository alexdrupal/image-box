!function(a){function c(){return b.onClose&&b.onClose(),!a(d).fadeOut(b.duration)}var b={duration:300,preserveHeight:!0,prevText:"&lang;",nextText:"&rang;",closeText:"&times;",bulletText:"&bullet;",classOverlay:"iboxOverlay",classWrapper:"iboxWrapper",classButtons:"iboxButtons",classBullets:"iboxBullets",classBullet:"iboxBullet",classActiveBullet:"iboxActive",classTitle:"iboxTitle"},d=document.createElement("div"),e=d.appendChild(document.createElement("div")),f=e.appendChild(document.createElement("img")),g=e.appendChild(document.createElement("div")),h=e.appendChild(document.createElement("div")),i=e.appendChild(document.createElement("a")),j=e.appendChild(document.createElement("a")),k=e.appendChild(document.createElement("a"));a(d).click(c),a(i).attr("id","close").attr("href","#").click(c),a(j).attr("id","prev").attr("href","#"),a(k).attr("id","next").attr("href","#"),a(function(){document.body.appendChild(d)}),a(document).keyup(function(b){return a(d).is(":visible")?(27==b.keyCode&&c(),37==b.keyCode&&a(j).click(),void(39==b.keyCode&&a(k).click())):null}),a.imageBoxOpen=function(c){a(f).attr("src",c),a(i).hide(),a(j).hide(),a(k).hide(),a(g).hide().empty(),a(h).hide().text(""),a(d).unbind("click").fadeIn(b.duration)},a.imageBoxClose=function(){a(d).unbind("click").click(c),a(d).fadeOut(b.duration,function(){a(i).show(),a(j).show(),a(k).show(),a(g).show(),a(h).show()})},a.fn.imagebox=function(c){function n(a,b,c){return Math.min(Math.max(a,b),c)}function o(a){return n(a,0,m.length-1)}function p(a){return l=o(a)}function q(){if(b.preserveHeight){var c=a(f).height()+"px";a(j).css({"line-height":c,height:c}),a(k).css({"line-height":c,height:c})}a(j).show(),a(k).show(),b.afterChange&&b.afterChange()}function r(b){return p(b),a(m[b]).attr("href")}function s(c){return a(j).hide(),a(k).hide(),b.beforeChange&&b.beforeChange(),a(h).html(a(m[c]).attr("title")),a(a("a",g).removeClass(b.classActiveBullet)[c]).addClass(b.classActiveBullet),a(f).fadeOut(b.duration,function(){a(this).attr("src",r(c)).fadeIn(b.duration,q)}),!1}var l=0,m=this;return c&&a.extend(b,c),a(i).addClass(b.classButtons).html(b.closeText),a(j).addClass(b.classButtons).html(b.prevText),a(k).addClass(b.classButtons).html(b.nextText),this.click(function(){return a(g).empty(),a(d).fadeIn(b.duration),a(j).unbind("click").click(function(){return s(l-1)}),a(k).unbind("click").click(function(){return s(l+1)}),m.each(function(c){var d=g.appendChild(document.createElement("a"));a(d).attr("id","bullet"+c).attr("href","#").addClass(b.classBullet).click(function(){return s(c)}).html(b.bulletText)}),s(m.index(this))}),a(d).attr("id","iboxOverlay").addClass(b.classOverlay),a(e).attr("id","iboxWrapper").addClass(b.classWrapper),a(g).attr("id","iboxBullets").addClass(b.classBullets),a(h).attr("id","iboxTitle").addClass(b.classTitle),b.onLoad&&b.onLoad(),this}}(jQuery);