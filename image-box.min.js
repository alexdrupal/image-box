!function(a){function k(b){27==b.keyCode&&m(),37==b.keyCode&&a(i).click(),39==b.keyCode&&a(j).click()}function l(){a(document).unbind("keyup",k),a(e).attr("src",b.imageLoading),b.onClose&&b.onClose()}function m(){return a(c).fadeOut(b.duration,l),!1}function n(a,b,c){return Math.min(Math.max(a,b),c)}function o(){}function p(){a(this).remove()}function q(){a(this).fadeOut(b.msgFadeDuration,p)}function r(c,d,e){var f=document.createElement("div"),g=function(){a(f).next().each(q)},h=function(){setTimeout(g,b.msgNextDuration)},i=f.appendChild(document.createElement("span"));a(i).addClass(b.classMessageButton).click(function(){a(f).each(q)}).html(b.msgCloseButton),c.prepend(a(f).append("<span>"+d+"</span>"));var j=b.msgNextDuration<0?o:h;return a(f).addClass(e).fadeIn(b.msgFadeDuration,j),c}var b={duration:400,preserveHeight:!0,prevText:"&lang;",nextText:"&rang;",closeText:"&times;",bulletText:"&bullet;",imageLoading:"data:image/svg+xml;base64,"+btoa('<svg version="1.1" id="L1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="70px" height="80px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve"><rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" /></rect><rect x="8" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" /></rect><rect x="16" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" /></rect></svg>'),classOverlay:"iboxOverlay",classWrapper:"iboxWrapper",classButtons:"iboxButtons",classButtonClose:"iboxClose",classButtonPrev:"iboxPrev",classButtonNext:"iboxNext",classBullets:"iboxBullets",classBullet:"iboxBullet",classActiveBullet:"iboxActive",classTitle:"iboxTitle",msgFadeDuration:1e3,msgNextDuration:8e3,msgCloseButton:"&times;",classMessageButton:"msgButton",classMessageOk:"msgOk",classMessageInfo:"msgInfo",classMessageWarn:"msgWarn",classMessageError:"msgError"},c=document.createElement("div"),d=c.appendChild(document.createElement("div")),e=d.appendChild(document.createElement("img")),f=d.appendChild(document.createElement("div")),g=d.appendChild(document.createElement("div")),h=d.appendChild(document.createElement("a")),i=d.appendChild(document.createElement("a")),j=d.appendChild(document.createElement("a"));a(function(){document.body.appendChild(c)}),a(c).addClass(b.classOverlay).click(m),a(d).addClass(b.classWrapper),a(h).attr("href","#").click(m),a.imageBoxOpen=function(d){a(e).attr("src",d||b.imageLoading),a(h).hide(),a(i).hide(),a(j).hide(),a(f).hide().empty(),a(g).hide().text(""),a(c).unbind("click").fadeIn(b.duration)},a.imageBoxClose=function(){a(c).fadeOut(b.duration,function(){a(h).show(),a(i).show(),a(j).show(),a(f).show(),a(g).show(),a(this).unbind("click").click(m)})},a.fn.messageBox=function(c){return a.extend(b,c),this},a.fn.showBoxOk=function(a){return r(this,a,b.classMessageOk)},a.fn.showBoxInfo=function(a){return r(this,a,b.classMessageInfo)},a.fn.showBoxWarn=function(a){return r(this,a,b.classMessageWarn)},a.fn.showBoxError=function(a){return r(this,a,b.classMessageError)},a.fn.hideBoxMsgs=function(){return a(this).children().each(q)},a.fn.imageBox=function(l){function p(){if(l.preserveHeight){var b=a(e).height()+"px";a(i).css({"line-height":b,height:b}),a(j).css({"line-height":b,height:b})}a(i).show(),a(j).show(),l.afterChange&&l.afterChange()}function q(b){return o=n(b,0,m.length-1),a(i).hide(),a(j).hide(),l.beforeChange&&l.beforeChange(),a(g).html(a(m[b]).attr("title")),a(e).fadeOut(l.duration,function(){a(this).attr("src",a(m[b]).attr("href")).fadeIn(l.duration,p);var c=a("a",f).removeClass(l.classActiveBullet);a(c[o]).addClass(l.classActiveBullet)}),!1}l=a.extend({},b,l);var m=this,o=0;return a(h).addClass(l.classButtons+" "+l.classButtonClose).html(l.closeText),a(i).attr("href","#").addClass(l.classButtons+" "+l.classButtonPrev).html(l.prevText),a(j).attr("href","#").addClass(l.classButtons+" "+l.classButtonNext).html(l.nextText),this.click(function(){return a(f).empty(),a(document).keyup(k),a(i).unbind("click").click(function(){return q(o-1)}),a(j).unbind("click").click(function(){return q(o+1)}),m.each(function(b){var c=f.appendChild(document.createElement("a"));a(c).attr("href","#").addClass(l.classBullet).click(function(){return q(b)}).html(l.bulletText)}),a(c).fadeIn(l.duration),q(m.index(this))}),a(c).addClass(l.classOverlay),a(d).addClass(l.classWrapper),a(f).addClass(l.classBullets),a(g).addClass(l.classTitle),l.onLoad&&l.onLoad(),this}}(jQuery);
